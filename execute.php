<?php
$content = file_get_contents("php://input");
$update = json_decode($content, true);

if(!$update)
{
  exit;
}

$message = isset($update['message']) ? $update['message'] : "";
$messageId = isset($message['message_id']) ? $message['message_id'] : "";
$chatId = isset($message['chat']['id']) ? $message['chat']['id'] : "";
$firstname = isset($message['chat']['first_name']) ? $message['chat']['first_name'] : "";
$lastname = isset($message['chat']['last_name']) ? $message['chat']['last_name'] : "";
$username = isset($message['chat']['username']) ? $message['chat']['username'] : "";
$date = isset($message['date']) ? $message['date'] : "";
$text = isset($message['text']) ? $message['text'] : "";
$text = strtolower($text);
$text = trim( preg_replace( "/[^0-9a-z]+/i", " ", $text ) );
$response = "";
header("Content-Type: application/json");


//	Array squadre di calcio russe
$russianFC = array("FC Abinsk", "FC Agan Raduzhny", "FC Agidel Ufa", "FC Agrokomplekt Ryazan", "FC Akademiya Dimitrovgrad", "FC Akademiya Togliatti", "FC Alania-2 Vladikavkaz", "FC Alania Vladikavkaz", "FC Aleks Angarsk", "FC Aleks Gatchina", "FC Almaz Moscow", "FC Alnas Almetyevsk", "FC Altair-Khelling Derbent", "FC Amkar Perm", "FC Amur Blagoveshchensk", "FC Amur-Energia Blagoveshchensk", "FC Amur Komsomolsk-on-Amur", "FC Anapa", "FC Angara Angarsk", "FC Angara Boguchany", "FC Angusht Malgobek", "FC Angusht Nazran", "FC Anzhi-2 Kaspiysk", "FC Anzhi Makhachkala", "FC APK Azov", "FC APK Morozovsk", "FC Argo Kaspiysk", "FC Arsenal-2 Tula", "FC Arsenal Tula", "FC Arzamas", "FC Asmaral Kislovodsk", "FC Asmaral Moscow", "FC Astrakhan", "FC Astrateks Astrakhan", "FC Atommash Volgodonsk", "FC Avangard Kamyshin", "FC Avangard Kolomna", "FC Avangard-Kolos Taganrog", "FC Avangard-Kortek Kolomna", "FC Avangard Kursk", "FC Avangard Podolsk", "FC Avtodor-BMK Vladikavkaz", "FC Avtodor-Olaf Vladikavkaz", "FC Avtodor Vladikavkaz", "FC Avtomobilist Noginsk", "FC Avtomobilist Yuzhno-Sakhalinsk", "FC Avtopribor Oktyabrsky", "FC Avtozapchast Baksan", "FC Azamat Cheboksary", "FC Balakovo", "FC Baltika-2 Kaliningrad", "FC Baltika Kaliningrad", "FC Baltika-Tarko Kaliningrad", "FC Bashinformsvyaz-Dynamo Ufa", "FC Bataysk-2007", "FC Baysachnr Elista", "FC Berezniki", "FC Beshtau Lermontov", "FC Beslan-FAYUR Beslan", "FC Biokhimik-Mordovia Saransk", "FC BSK Spirovo", "FC Bulat Cherepovets", "FC Chelyabinsk", "FC Chernomorets-2 Novorossiysk", "FC Chernomorets Novorossiysk", "FC Chertanovo Moscow", "FC Chita", "FC Chkalovets-1936 Novosibirsk", "FC Chkalovets Novosibirsk", "FC Chkalovets-Olympic Novosibirsk", "FC CSKA-2 Moscow", "FC CSKA Moscow", "FC CSK VVS-Kristall Smolensk", "FC Dagdizel Kaspiysk", "FC Derbent", "FC Devon Oktyabrsky", "FC Diana Volzhsk", "FC Dmitrov", "FC Dnepr Smolensk", "FC Don Novomoskovsk", "FC Druzhba Budyonnovsk", "FC Druzhba Maykop", "FC Druzhba Yoshkar-Ola", "FC Dynamo-2 Moscow", "FC Dynamo Barnaul", "FC Dynamo Bryansk", "FC Dynamo-Gazovik Tyumen", "FC Dynamo-Imamat Makhachkala", "FC Dynamo Izhevsk", "FC Dynamo Izobilny", "FC Dynamo Kemerovo", "FC Dynamo Kirov", "FC Dynamo Kostroma", "FC Dynamo Makhachkala", "FC Dynamo-Mashinostroitel Kirov", "FC Dynamo Mikhaylovka", "FC Dynamo Moscow", "FC Dynamo Omsk", "FC Dynamo Perm", "FC Dynamo Saint Petersburg", "FC Dynamo Stavropol", "FC Dynamo Tula", "FC Dynamo Vologda", "FC Dynamo Voronezh", "FC Dynamo Yakutsk", "FC Dynamo-Zhemchuzhina-2 Sochi", "FC Elektron Almetyevsk", "FC Elektronika Nizhny Novgorod", "FC Elektron Vyatskiye Polyany", "FC Elista", "FC Energetik Uren", "FC Energia Chaykovsky", "FC Energia Kamyshin", "FC Energia Pyatigorsk", "FC Energia-Tekstilshchik Kamyshin", "FC Energia Ulyanovsk", "FC Energia Velikiye Luki", "FC Energia Volzhsky", "FC Energomash Belgorod", "FC Erzi Petrozavodsk", "FC Erzu Grozny", "FC Estel Ufa", "FC Etalon Baksan", "FC Fabus Bronnitsy", "FC Fakel Voronezh", "FC Fakel-Voronezh Voronezh", "FC FCS-73 Voronezh", "FC FSA Voronezh", "FC Fortuna Mytishchi", "FC Galaks St. Petersburg", "FC Gastello Ufa", "FC Gatchina", "FC Gazovik-Gazprom Izhevsk", "FC Gazovik Izhevsk", "FC Gazovik Orenburg", "FC Gekris Anapa", "FC Gekris Novorossiysk", "FC Gigant Grozny", "FC Gigant Voskresensk", "FC Gofrokarton Digora", "FC Gornyak Gramoteino", "FC Gornyak Kachkanar", "FC Gornyak Kushva", "FC Gornyak Uchaly", "FC Gubkin", "FC Idel Kazan", "FC Industriya Borovsk", "FC Industriya Obninsk", "FC Ingushetia Nazran", "FC Interros Moscow", "FC Irgiz Balakovo", "FC Iriston Mozdok", "FC Iriston Vladikavkaz", "FC Irtysh-1946 Omsk", "FC Irtysh Omsk", "FC Irtysh Tobolsk", "FC Iskra Engels", "FC Iskra Novoaleksandrovsk", "FC Iskra Smolensk", "FC Istochnik Rostov-on-Don", "FC Istra", "FC Izhevsk", "FC Izumrud Timashyovsk", "FC Kabardey-ZET Nizhny Cherek", "FC Kaluga", "FC KAC-SKIF Naberezhnye Chelny", "FC KamAZavtocenter Naberezhnye Chelny", "FC KamAZ-Chally Naberezhnye Chelny", "FC KamAZ Naberezhnyye Chelny", "FC Karelia-Erzi Petrozavodsk", "FC Karelia Petrozavodsk", "FC Kaspiy Kaspiysk", "FC Kavkazkabel Prokhladny", "FC Kavkaztransgaz-2005 Ryzdvyany", "FC Kavkaztransgaz Izobilny", "FC KDS Samrau Ufa", "FC Khimik Belorechensk", "FC Khimik Dankov", "FC Khimik Dzerzhinsk", "FC Khimik Koryazhma", "FC Khimik Meleuz", "FC Khimik Uvarovo", "FC Khimki", "FC Khopyor Balashov", "FC Kinotavr Podolsk", "FC Kolomna", "FC Kolomna-820", "FC Kolos Bykovo", "FC Kolos Krasnodar", "FC Kommunalnik-Druzhba-d Maykop", "FC Kosmos Dolgoprudny", "FC Kosmos Elektrostal", "FC Kosmos-Kirovets Saint Petersburg", "FC Kosmos-Kvest Dolgoprudny", "FC Kosmos Yegoryevsk", "FC Kraneks Ivanovo", "FC Krasnodar", "FC Krasnodar-2000", "FC Krasnogvardeyets Moscow", "FC Krasnoznamensk", "FC Krasnoznamensk-Selyatino Krasnoznamensk", "FC Kristall Dyatkovo", "FC Kristall Neryungri", "FC Kristall Sergach", "FC Kristall Smolensk", "FC Krivichi Velikiye Luki", "FC Krylya Sovetov-2 Samara", "FC Krylya Sovetov Samara", "FC Krylya Sovetov-SOK Dimitrovgrad", "FC Kuban Barannikovsky", "FC Kuban Krasnodar", "FC Kuban Slavyansk-na-Kubani", "FC Kurgan", "FC Kuzbass-Dynamo Kemerovo", "FC KUZBASS Kemerovo","FC Lada Dimitrovgrad", "FC Lada-Energia Dimitrovgrad", "FC Lada-Grad Dimitrovgrad", "FC Lada-Simbirsk Dimitrovgrad", "FC Lada-SOK Dimitrovgrad", "FC Lada Togliatti", "FC Lada-Togliatti-VAZ Togliatti", "FC Lisma-Mordovia Saransk", "FC Lobnya-Alla", "FC Lokomotiv-2 Moscow", "FC Lokomotiv Chita", "FC Lokomotiv Kaluga", "FC Lokomotiv Liski", "FC Lokomotiv Mineralnye Vody", "FC Lokomotiv Moscow", "FC Lokomotiv-M Serpukhov", "FC Lokomotiv Nizhniy Novgorod", "FC Lokomotiv Saint Petersburg", "FC Lokomotiv-Time Mineralnye Vody", "FC Lokomotiv Ussuriysk", "FC Lokomotiv Yelets", "FC Lokomotiv-Zenit-2 Saint Petersburg", "FC Lotto-MKM Moscow", "FC Luch-Energia Vladivostok", "FC Luch Tula", "FC Luch Vladivostok", "FC Lukhovitsy", "FC Lukoil Chelyabinsk", "FC Maccabi Moscow", "FC Magnitka Magnitogorsk", "FC Mashinostroitel Pskov", "FC Mashinostroitel Sergiyev Posad", "FC Mashuk-KMV Pyatigorsk", "FC Mashuk Pyatigorsk", "FC MChS Selyatino", "FC MEPHI Moscow", "FC Metallurg Aldan", "FC Metallurg Krasnoyarsk", "FC Metallurg-Yenisey Krasnoyarsk", "FC Metallurg Krasny Sulin", "FC Metallurg-Kuzbass Novokuznetsk", "FC Metallurg Lipetsk", "FC Metallurg Magnitogorsk", "FC Metallurg-Metiznik Magnitogorsk", "FC Metallurg Novokuznetsk", "FC Metallurg Novotroitsk", "FC Metallurg Pikalyovo", "FC Metallurg Stary Oskol", "FC Metallurg-Oskol Stary Oskol", "FC Metallurg Vyksa", "FC Metallurg-ZapSib Novokuznetsk", "FC Metiznik Magnitogorsk", "FC Mezhdurechensk", "FC MGU Saransk", "FC MITOS Novocherkassk", "FC Monolit Moscow", "FC Mordovia Saransk", "FC Moscow", "FC Mosenergo Moscow", "FC Moskovsky-Selyatino Selyatino", "FC Mostovik-Primorye Ussuriysk", "FC Mostransgaz Gazoprovod", "FC Motor Prokopyevsk", "FC Mozdok", "FC MVD Rossii Moscow", "FC Nara-ShBFR Naro-Fominsk", "FC Nara-Desna Naro-Fominsk", "FC Nart Cherkessk", "FC Nart Nartkala", "FC Neftekhimik Nizhnekamsk", "FC Neftyanik Bugulma", "FC Neftyanik Pokhvistnevo", "FC Neftyanik Ufa", "FC Neftyanik Yaroslavl", "FC Nemkom Krasnodar", "FC Nika Krasny Sulin", "FC Nika Moscow", "FC Niva Slavyansk-na-Kubani", "FC Nizhny Novgorod", "FC Nosta Novotroitsk","FC Oazis Yartsevo", "FC Obninsk", "FC Oka Kolomna", "FC Okean Nakhodka", "FC Olimpia Volgograd", "FC Olimp Kislovodsk", "FC Orekhovo Orekhovo-Zuyevo", "FC Oryol", "FC Pele Moscow", "FC Petrotrest Saint Petersburg", "FC Pikalyovo", "FC Planeta Bugulma", "FC Politekhnik-92 Barnaul", "FC Presnya Moscow", "FC Progress Biysk", "FC Progress Chernyakhovsk", "FC Progress Zelenodolsk", "FC Prometey-Dinamo Saint Petersburg", "FC Pskov", "FC Pskov-2000", "FC Pskov-747", "FC Radian-Baikal Irkutsk", "FC Rassvet Troitskoye", "FC Reformatsiya Abakan", "FC Rekord Aleksandrov", "FC Reutov", "FC Ritm Alekseyevka", "FC Ritm Belgorod", "FC Roda Moscow", "FC Rossia Moscow", "FC Rostov", "FC Rostselmash-2 Rostov-on-Don", "FC Rostselmash Rostov-on-Don", "FC Rotor-2 Mikhaylovka", "FC Rotor-2 Volgograd", "FC Rotor Volgograd", "FC Rubin-2 Kazan", "FC Rubin Kazan", "FC Rubin-TAN Kazan", "FC Rusichi Oryol", "FC Ryazan", "FC Ryazan-Agrokomplekt", "FC Rybinsk", "FC Sakhalin Kholmsk", "FC Sakhalin Yuzhno-Sakhalinsk", "FC Salyut Belgorod", "FC Salyut-Energiya Belgorod", "FC Salyut Saratov", "FC Salyut-YuKOS Belgorod", "FC Samotlor-XXI Nizhnevartovsk", "FC Saranskeksport Saransk", "FC Saturn-1991 Saint Petersburg", "FC Saturn-2 Moscow Oblast", "FC Saturn-2 Ramenskoye", "FC Saturn-2 Zhukovsky", "FC Saturn Moscow Oblast (dissolved)", "FC Saturn Naberezhnyye Chelny", "FC Saturn Ramenskoye", "FC Saturn-Ren-TV Moscow Oblast (current)", "FC Saturn Yegoryevsk", "FC Selenga Ulan-Ude", "FC Sever Murmansk", "FC Severstal Cherepovets", "FC Shakhtyor Artyom", "FC Shakhtyor Kiselyovsk", "FC Shakhtyor Prokopyevsk", "FC Shakhtyor Shakhty", "FC Sheksna Cherepovets", "FC Sherstyannik Nevinnomyssk", "FC Shinnik Yaroslavl", "FC Sibir-2 Novosibirsk", "FC Sibir Kurgan", "FC Sibir Novosibirsk", "FC Sibiryak Bratsk", "FC Sibur-Khimik Dzerzhinsk", "FC SKA-Energia Khabarovsk", "FC SKA Khabarovsk", "FC SKA Rostov-on-Don", "FC Skat-5s Yelabuga", "FC SKD Samara", "FC Slavyansk", "FC Smena Komsomolsk-on-Amur", "FC Smena Moscow", "FC Smena-Saturn Saint Petersburg", "FC Smena-Zenit Saint Petersburg", "FC Smolensk", "FC Sochi-04", "FC Sodovik Sterlitamak", "FC Sokol-PZhD Saratov", "FC Sokol Saratov", "FC SOYUZ-Gazprom Izhevsk", "FC Spartak-2 Moscow", "FC Spartak-2 Nartkala", "FC Spartak Alagir", "FC Spartak-Alania Vladikavkaz", "FC Spartak Anapa", "FC Spartak-Arktikbank Arkhangelsk", "FC Spartak-Bratskiy Yuzhny", "FC Spartak Bryansk", "FC Spartak Chelyabinsk", "FC Spartak-Chukotka Moscow", "FC Spartak Gorno-Altaysk", "FC Spartak Kavkaztransgaz Izobilny", "FC Spartak Kostroma", "FC Spartak Kurgan", "FC Spartak Lukhovitsy", "FC Spartak Moscow", "FC Spartak-MZK Ryazan", "PFC Spartak Nalchik", "FC Spartak Nizhny Novgorod", "FC Spartak-Orekhovo Orekhovo-Zuyevo", "FC Spartak Oryol", "FC Spartak-Peresvet Bryansk", "FC Spartak Ryazan", "FC Spartak Rybnoye", "FC Spartak Shchyolkovo", "FC Spartak Tambov", "FC Spartak-Telekom Shuya", "FC Spartak-UGP Anapa", "FC Spartak Vladikavkaz", "FC Spartak Yoshkar-Ola", "FC Sportakademklub Moscow", "FC Sputnik Kimry", "FC Start Yeysk", "FC Stavropol", "FC Stavropolye-2009 Stavropol", "FC Stroitel Morshansk", "FC Stroitel Ufa", "FC Sudostroitel Astrakhan", "FC SUO Moscow", "FC Svetogorets Svetogorsk", "FC Svetotekhnika Saransk","FC Taganrog", "FC Tekhinvest-M Moscow", "FC Tekstilshchik Isheyevka", "FC Tekstilshchik Ivanovo", "FC Tekstilshchik Kamyshin", "FC Tekstilshchik-Telekom Ivanovo", "FC Terek Grozny", "FC Titan Moscow", "FC Titan Reutov", "FC Titan Zheleznodorozhny", "FC Tobol Kurgan", "FC Togliatti", "FC Tom Tomsk", "FC Torgmash Lyubertsy", "FC Torpedo-2 Moscow", "FC Torpedo Adler", "FC Torpedo-Alttrak Rubtsovsk", "FC Torpedo Armavir", "FC Torpedo Arzamas", "FC Torpedo Georgiyevsk", "FC Torpedo Izhevsk", "FC Torpedo-Luzhniki Moscow", "FC Torpedo-Metallurg Moscow", "FC Torpedo Miass", "FC Torpedo-MKB Mytishchi", "FC Torpedo Moscow", "FC Torpedo Mytishchi", "FC Torpedo Pavlovo", "FC Torpedo-RG Moscow", "FC Torpedo Rubtsovsk", "FC Torpedo Ryazan", "FC Torpedo Taganrog", "FC Torpedo-UdGu Izhevsk", "FC Torpedo-Viktoriya Nizhny Novgorod", "FC Torpedo Vladimir", "FC Torpedo Volzhsky", "FC Torpedo-ZIL Moscow", "FC TRASKO Moscow", "FC Trestar Moscow", "FC Trion-Volga Tver", "FC Trubnik Kamensk-Uralsky", "FC Turbostroitel Kaluga", "FC Tyumen","FC Ugay Uray", "FC Uralan Elista", "FC Uralan-Plus Moscow", "FC UralAZ Miass", "FC Uralelektromed Verkhnyaya Pyshma", "FC Uralets Nizhny Tagil", "FC Uralmash Yekaterinburg", "FC Ural Yekaterinburg", "FC Urartu Grozny", "FC Vaynakh Shali", "FC Venets Gulkevichi", "FC Vest Kaliningrad - FC Vidnoye", "FC Viktor-Avangard Kolomna", "FC Viktor-Gigant Voskresensk", "FC Viktoriya Nazarovo", "FC Vityaz Krymsk", "FC Vityaz Podolsk", "FC Volga Balakovo", "FC Volga Nizhniy Novgorod", "FC Volgar Astrakhan", "FC Volgar-Gazprom Astrakhan", "FC Volga Tver", "FC Volga Ulyanovsk", "FC Volgodonsk", "FC Volgograd", "FC Volochanin-89 Vyshny Volochyok", "FC Volochanin-Ratmir Vyshniy Volochyok", "FC Volochanin Vyshny Volochyok", "FC Volzhanin Kineshma", "FC Vyatka Kirov", "FC Vympel Rybinsk", "FC Yelets", "FC Yudzhin Samara", "FC Yunit Samara", "FC Zarya Krotovka", "FC Zarya Leninsk-Kuznetsky", "FC Zavodchanin Saratov", "FC Zavolzhye Engels", "FC Zelenograd", "FC Zenit-2 Saint Petersburg", "FC Zenit Chelyabinsk", "FC Zenit Izhevsk", "FC Zenit Penza", "FC Zenit Saint Petersburg", "FC Zhemchuzhina-2 Sochi", "FC Zhemchuzhina Budyonnovsk", "FC Zhemchuzhina Sochi", "FC Znamya Truda Orekhovo-Zuyevo", "FC Zodiak Stary Oskol", "FC Zvezda Gorodishche", "FC Zvezda Irkutsk", "FC Zvezda Perm", "FC Zvezda Ryazan", "FC Zvezda Serpukhov"); 

//	frasi celebri
$frasi = array("Icurdi o Icardi?", "Chi aula?", "Klose dell'altro mondo", "Siete dei calcinacci", "Cosa avevi in mente? Tutta un'altra vita", "Che fantastica storia è la vita", "Rozzi", "Trabbi\nCosa ne pensi di NCIS 9x10?", "Leonardo\nCosa ne pensi dei credenti?", "Sto andando a fare ripe", "Dio can", "Grande André\nHai ficcato?", "Ma ruffi\nDormivi?", "Dio can frau", "Frocia", "Nico Ago sei merda con bisturi", "Massimo\nPensi di aver raggiunto il successo nella vita?", "Massimo\nCosa significa per te avere successo?", "Grande Gigi", "Vali meno del calcio alle olimpiadi", "Vabbè Leonardo", "Vali meno del trofeo TIM", "Vali meno di Papi", "Frau sei Amadeus", "Non vali nulla", "Dio can\nE anche oggi in Torre Archimede", "7.54 qualcuno?", "Ma che cazzo vuoi\nFallito di merda", "Nico Ago\nVali meno del cestino degli scarti ospedalieri", "Porco dio vali meno della carta del prosciutto", "Dio can persa anche questa al fanta", "Leonardo\nSecondo te l'economia è una scienza?", "Yoses\nPensi di essere comunista?", "Frau che fa tesi sui pedalò", "Porci ma quando esce articolo di ultimo uomo su Akinfeev?", "Stai buono", "Stai fermo", "Frau\nRimetti Nadali", "Frau\nButta fuori trabbi");

//Divido il messaggio in un array di parole
$textArray = explode(" ", $text);

//Rispondo in base alla casistica
if (in_array("russia", $textArray) || in_array("\russia", $textArray)) {
	$index = array_rand($russianFC);
	$response = $russianFC[$index];
}
elseif (in_array("papirone", $textArray)) {
	$response = "Massimone";
}
elseif (in_array("frau", $textArray)) {
	$response = "ebreo";
}
elseif (in_array("scherzo", $textArray)) {
	$response = "sei un grande";
}
elseif (in_array("zuca", $textArray)) {
	$index = array_rand($frasi);
	$response = $frasi[$index];
}

$parameters = array('chat_id' => $chatId, "text" => $response);
$parameters["method"] = "sendMessage";
echo json_encode($parameters);
